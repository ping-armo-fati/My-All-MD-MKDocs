3D测量技术（Lidar篇） 知乎

星期一, 十二月 5, 2022

9:20 上午

 

已剪辑自: [https://zhuanlan.zhihu.com/p/367383445]{.underline}

随着自动驾驶和SLAM 逐渐走入大众视野，Lidar 作为可高精度测量环境深度（距离）的爆款传感器走入了大众视野。然而，Lidar 是唯一可用的环境深度测量传感器码？其背后技术是什么？为什么谈到Lidar首先想到的就是其价格高昂？有没有其他选择？

针对上述问题，今天我们就来谈一谈环境3D 测量技术。

1. LIDAR 的由来
---------------

Lidar（⚠️其中的i读作/ai/）,是 Light Detection And Ranging 的首字母。 和Radar(Radio Detection And Ranging)以及水下常用的Sonar(Sound Detection And Ranging)的起名规律和功能都基本类似。但是Lidar 可以做到细粒化检测，也就是对周边环境进行高精度3D扫描，形成点阵云，所以Lidar 也可看成Light Imaging Detection And Ranging 的首字母连写。

![](..\..\..\assets\004_3D测量技术（Lidar篇）_知乎_000.png)

研究者对森林扫描得到的Lidar 图像。通过空中3D 扫描不仅可以快速的对大片区域的植被覆盖情况进行分析，而且由于树叶、树枝、树干和底层灌木对光的多次反射，深入分析这些数据可以得到树木的成长状况和植物种类构成，帮助我们更好的保护森林。-图片选自《The wildlife society》

虽然Lidar 在最近几年才走入人们的视野，同时随着自动驾驶的推广而被越来越多人了解。但是，Lidar技术至少已经经过了50年的发展。美国阿波罗登月计划就使用Lidar技术来扫描月球的表面结构。

2.Lidar 背后的技术
------------------

目前,Lidar主要有两种主流技术实现方法**：三角测距方法和TOF法**。

来分析一下这两种方法。

**三角测距方法（Triangular Ranging Lidar）**

三角测距方法并不是Lidar的首创。相反，三角测距的历史可追溯到古代。在中国、古希腊和古埃及，历代先贤们都曾用三角测距解决了大量天文、航海、土地测量的问题。基于三角测距的Lidar实现原理大致如下：

-   一个发射器（可以是可见光或红外光等不可见光），一个接收器（CCD或者CMOS）

-   发射器采用特定角度发射光，光遇到物体反射，反射光被接收器接收。

-   因为发射器发射的角度及发射器、接收器之间的距离已知，所以可通过三角计算得到目标距离。

![](..\..\..\assets\004_3D测量技术（Lidar篇）_知乎_001.png)

三角测距原理示意图

如上图所示，发射器以角度 β\\beta 发射激光，激光在物体表面发射到达接收器。设接收器使用小孔成像原理，且焦距为 ff 。x即像素位置,可测量。注意，这时上图中有几个相似三角形，上面大三角形中的左边部分和下面小三角形的左边部分相似，同时右侧部分也相似。

所以，我们有 f/x=d/s2f/x=d/s\_2 ,且 tan⁡(β)=d/s1\\tan(\\beta)=d/s\_1 , s1+s2=ss\_1+s\_2=s .

除了d之外，其他量都是已知或可以测定的，所以d可求。(为了保证反射光线被接收，发射器角度 β\\beta 是可控的)

**飞行时间方法（TOF, time of flight)**

从原理上说，这个方法更为简单，需要三个组件的相互配合。激光器发出一束短脉冲激光，这束光经过物体反射到达接收器。计时器记录发射时间及接收时间，从而计算出这束光的飞行时间t。

![](..\..\..\assets\004_3D测量技术（Lidar篇）_知乎_002.png)

原理虽然简单，但是实现起来却比较困难。我们知道光速 v≈3×108m/sv\\approx 3\\times 10\^8 m/s ,假设测量距离是1m，也只需要几纳秒，如果测量精度需要到达cm以内，那计时精度需要达到ps。而我们常见的电子器件中的晶振一般为16MHZ以下。同时，如上图所示，TOF方法的计时以发送上升沿开始，接收上升沿截止。如何发射一个完美的上升沿对发射器的要求很高；同时因为噪声的干扰，接收脉冲长得可能比较奇怪，接收器这边也承担了不小的信号处理压力。这些原因也使得基于TOF技术的Lidar 价格较高。

无论是基于三角测距或TOF方法，我们上述只提到了一束光，那么如何形成一开始图像那种点阵云呢？那就需要电机配合了，制定合适的扫描路线和扫描速度再配合后端的计算处理，就可以得到需要的3D点阵云了。

3.Triangular V.S. TOF
---------------------

简单了解Lidar 的两种工作原理后，那实际使用中我们到底是选择哪种呢？下面我们从测量距离、精度以及测量速度几个方面来分析以下这两种Lidar 的性能。

1）测量距离pk

-   可测量最短距离，通过原理可知，三角测距的可测量最短距离是由发射器和接收器的安装尺寸决定的，太近的物体反射光线无法被接收到。所以基于三角测距原理的Lidar 最近有效距离一般为10cm以上。而基于ToF测量方式的最短有效距离取决于其计时器的精度，一般来说测量精度在cm级的TOF,那么其可测量的最短距离也为1-2cm。

-   最长测量距离。同最短测量距离一样，三角测距的最长距离也受限于发射器和接收器的安装尺寸，太远的物体反射光线超出接收器范围。市面上的三角测距的Lidar 一般在10m左右。而TOF不受限于接收器范围，而主要由激光在传播过程的损耗决定，在正常环境下可以达到几十米，甚至更远。

所以，只在测量距离上考虑，TOF完胜。

2）测量精度

基于三角测距原理，测量精度随距离增加而下降。但是TOF的精度主要由计时器决定的，不根据测量距离变化而变化，目前我了解到的TOF的精度一般在1-2cm。但是，这种TOF的价格是随着精度的变化而成指数变化。

所以，在选择合适的传感器的时候，并不是精度高就是好的，如果项目的应用场景恰好就是在三角测距最佳工作范围内，那三角测距的Lidar则不失为一种高性价比的理想选择。

3）测量速度

无论是三角测距还是TOF测距，都是基于光的测距方法，速度基本可达到实时。其单点测量速度大概为几千次/秒。所以，在考虑Lidar 测量速度的时候，一般是讨论其扫描速度，而这是由安装机械结构、电机性能、部件重点以及后期的计算匹配速度等等综合决定的。

作为光学传感器，除了上述几点之外，还有一个非常重要的性能需要分析，那就是对环境光的抗干扰能力。无论是采用红外光还是蓝绿光，都免不了受到各种环境光的干扰。在这方面，基于脉冲发射的TOF就具有很强的抗干扰性。这就类似于，我们的数字信号往往比连续信号抗干扰能力更强。所以，在室外环境下，TOF的性能更加稳定，这也是为什么自主驾驶系统的Lidar 都采用了TOF 技术的原因。同时，上面也提到，光在介质中传播会有衰减，所以在雨天或者雾霾天气下，Lidar 的有效测量距离会大大降低。注意这时同样是光学传感器的光学摄像头也会受到极大影响。所以在自主驾驶中，只依靠光学传感器是不够安全的。
